
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>üçΩÔ∏è ‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            background-color: #fff;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h2, h3, h4 {
            text-align: center;
            color: #4CAF50;
        }

        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }

        input, select, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        input:focus, select:focus {
            border-color: #4CAF50;
            outline: none;
        }

        button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #388E3C;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            background-color: #f9f9f9;
            margin: 5px 0;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        li button {
            background-color: #f44336;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            color: white;
        }

        li button:hover {
            background-color: #d32f2f;
        }

        canvas {
            margin: 20px auto;
            display: block;
        }

        .flatpickr-calendar {
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>üçΩÔ∏è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h2>

        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì -->
        <form id="calorie-form">
            <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.): <input type="number" id="weight" required></label>
            <label>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (‡∏ã‡∏°.): <input type="number" id="height" required></label>
            <label>‡πÄ‡∏û‡∏®:
                <select id="gender">
                    <option value="male">‡∏ä‡∏≤‡∏¢</option>
                    <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
                </select>
            </label>
            <label>‡∏≠‡∏≤‡∏¢‡∏∏: <input type="number" id="age" required></label>
            <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢:
                <select id="activity">
                    <option value="1.2">‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</option>
                    <option value="1.375">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (1-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</option>
                    <option value="1.55">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (3-5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</option>
                    <option value="1.725">‡πÄ‡∏¢‡∏≠‡∏∞ (6-7 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</option>
                    <option value="1.9">‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</option>
                </select>
            </label>
            <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏Å‡∏Å.): <input type="number" id="target-weight" required></label>
            <button type="button" onclick="calculateCalories()">üöÄ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
        </form>

        <div id="result"></div>

        <hr>

        <h3>üçõ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
        <input type="text" id="food-search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£..." oninput="searchFood()">
        <ul id="food-list"></ul>

        <h4>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</h4>
        <ul id="selected-foods"></ul>

        <canvas id="calorieChart" width="400" height="400"></canvas>
        <canvas id="carbChart" width="400" height="400"></canvas>

        <hr>

        <h3>üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå/‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
        <input type="text" id="calendar" placeholder="üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
        <button onclick="viewWeeklyReport()">üìÖ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
        <button onclick="viewMonthlyReport()">üìÜ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>

        <canvas id="weeklyChart" width="400" height="200"></canvas>
        <canvas id="monthlyChart" width="400" height="200" style="display:none;"></canvas>

        <h3>‚öñÔ∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</h3>
        <input type="number" id="current-weight" placeholder="üí™ ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏Å‡∏Å.)">
        <button onclick="saveWeight()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</button>
        <canvas id="weightChart" width="400" height="200"></canvas>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏´‡∏≤‡∏£
        const foodDatabase = [
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß (1 ‡∏ó‡∏±‡∏û‡∏û‡∏µ)", calories: 80, carbs: 15 },
            { name: "‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î (1 ‡∏ó‡∏±‡∏û‡∏û‡∏µ)", calories: 90, carbs: 15 },
            { name: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á (1 ‡πÅ‡∏ú‡πà‡∏ô)", calories: 80, carbs: 15 },
            { name: "‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏ó‡∏£‡∏≤‡∏¢ (3 ‡∏ä‡πâ‡∏≠‡∏ô‡∏ä‡∏≤)", calories: 60, carbs: 15 },
            { name: "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î (1 ‡∏à‡∏≤‡∏ô‡πÄ‡∏•‡πá‡∏Å)", calories: 60, carbs: 15 },
            { name: "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ (1 ‡πÅ‡∏Å‡πâ‡∏ß)", calories: 60, carbs: 15 },
            { name: "‡∏ô‡∏°‡∏™‡∏î (1 ‡∏Å‡∏•‡πà‡∏≠‡∏á)", calories: 120, carbs: 12 },
            { name: "‡πÇ‡∏¢‡πÄ‡∏Å‡∏¥‡∏£‡πå‡∏ï (1 ‡∏ñ‡πâ‡∏ß‡∏¢)", calories: 120, carbs: 15 },
            { name: "‡∏ú‡∏±‡∏Å‡∏™‡∏î (6 ‡∏ó‡∏±‡∏û‡∏û‡∏µ)", calories: 30, carbs: 5 },
            { name: "‡∏ú‡∏±‡∏Å‡∏™‡∏∏‡∏Å (3 ‡∏ó‡∏±‡∏û‡∏û‡∏µ)", calories: 30, carbs: 5 }
        ];

        let calorieGoal = 0, carbGoal = 0, totalCalories = 0, totalCarbs = 0, selectedFoods = [];

        function calculateCalories() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseInt(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const activity = parseFloat(document.getElementById('activity').value);

            let BMR = (gender === "male")
                ? 10 * weight + 6.25 * height - 5 * age + 5
                : 10 * weight + 6.25 * height - 5 * age - 161;

            calorieGoal = BMR * activity;
            carbGoal = (calorieGoal * 0.5) / 4;

            document.getElementById('result').innerHTML = `
                <p>üéØ ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö: <span class="success">${calorieGoal.toFixed(0)} kcal</span></p>
                <p>üéØ ‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö: <span class="success">${carbGoal.toFixed(0)} g</span></p>
            `;
            updateCharts();
        }

        function searchFood() {
            const searchTerm = document.getElementById('food-search').value.toLowerCase();
            const filteredFoods = foodDatabase.filter(food => food.name.toLowerCase().includes(searchTerm));
            const foodList = document.getElementById('food-list');
            foodList.innerHTML = "";

            filteredFoods.forEach(food => {
                const li = document.createElement('li');
                li.innerHTML = `${food.name} - ${food.calories} kcal, ${food.carbs} g ‡∏Ñ‡∏≤‡∏£‡πå‡∏ö 
                    <button onclick="addFood('${food.name}')">‚ûï</button>`;
                foodList.appendChild(li);
            });
        }

        function addFood(foodName) {
            const food = foodDatabase.find(f => f.name === foodName);
            selectedFoods.push(food);
            totalCalories += food.calories;
            totalCarbs += food.carbs;
            updateSelectedFoods();
            updateCharts();
            checkOverConsumption();
        }

        function updateSelectedFoods() {
            const list = document.getElementById('selected-foods');
            list.innerHTML = "";
            selectedFoods.forEach(food => {
                const li = document.createElement('li');
                li.innerText = `${food.name} - ${food.calories} kcal, ${food.carbs} g ‡∏Ñ‡∏≤‡∏£‡πå‡∏ö`;
                list.appendChild(li);
            });
        }

        function updateCharts() {
            const calorieCtx = document.getElementById('calorieChart').getContext('2d');
            const carbCtx = document.getElementById('carbChart').getContext('2d');

            new Chart(calorieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['‡∏ó‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß', '‡πÄ‡∏´‡∏•‡∏∑‡∏≠', '‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢'],
                    datasets: [{
                        data: [totalCalories, Math.max(calorieGoal - totalCalories, 0), Math.max(totalCalories - calorieGoal, 0)],
                        backgroundColor: ['#FFEB3B', '#BDBDBD', '#F44336']
                    }]
                }
            });

            new Chart(carbCtx, {
                type: 'doughnut',
                data: {
                    labels: ['‡∏ó‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß', '‡πÄ‡∏´‡∏•‡∏∑‡∏≠', '‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢'],
                    datasets: [{
                        data: [totalCarbs, Math.max(carbGoal - totalCarbs, 0), Math.max(totalCarbs - carbGoal, 0)],
                        backgroundColor: ['#03A9F4', '#BDBDBD', '#F44336']
                    }]
                }
            });
        }

        function checkOverConsumption() {
            if (totalCalories > calorieGoal) alert("‚ö†Ô∏è ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢!");
            if (totalCarbs > carbGoal) alert("‚ö†Ô∏è ‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢!");
        }

        // ‡πÉ‡∏ä‡πâ Flatpickr
        flatpickr("#calendar", { dateFormat: "Y-m-d" });

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        window.onload = () => {
            const today = new Date().toISOString().split('T')[0];
            if (!foodData[today]) foodData[today] = [];
        };
    </script>
</body>
</html>
